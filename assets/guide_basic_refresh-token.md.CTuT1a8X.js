import{_ as a,c as i,o as e,ak as n}from"./chunks/framework.Be0JZvgR.js";const c=JSON.parse('{"title":"无感刷新","description":"","frontmatter":{},"headers":[],"relativePath":"guide/basic/refresh-token.md","filePath":"guide/basic/refresh-token.md","lastUpdated":1745041295000}'),t={name:"guide/basic/refresh-token.md"};function l(r,s,h,p,k,o){return e(),i("div",null,s[0]||(s[0]=[n(`<h1 id="无感刷新" tabindex="-1">无感刷新 <a class="header-anchor" href="#无感刷新" aria-label="Permalink to &quot;无感刷新&quot;">​</a></h1><div class="tip custom-block"><p class="custom-block-title">前言</p><p>此功能只有vben5版本才支持</p></div><p>无感刷新（Seamless Token Refresh）是一种在用户会话期间自动管理和更新身份验证令牌（通常是访问令牌）的技术。其主要目的是在用户的访问令牌过期时，通过后台静默地刷新令牌，从而确保用户无需手动重新登录，维持流畅的用户体验。</p><h2 id="refreshtoken" tabindex="-1">RefreshToken <a class="header-anchor" href="#refreshtoken" aria-label="Permalink to &quot;RefreshToken&quot;">​</a></h2><ul><li>当用户登录成功,接口会返回accessToken和refreshToken</li><li>如果用户在操作系统的时候接口返回401，此时系统会自动调用接口通过refreshToken自动获取刷新accessToken</li><li>接口地址：api/app/account/refresh-token</li><li>token信息保存在AbpProUserRefreshToken表中</li><li>每个refresh-token只能使用一次</li></ul><h2 id="配置" tabindex="-1">配置 <a class="header-anchor" href="#配置" aria-label="Permalink to &quot;配置&quot;">​</a></h2><ul><li>appsetting.json</li></ul><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &quot;Jwt&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;Audience&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Lion.AbpPro&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;SecurityKey&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;dzehzRz9a8asdfasfdadfasdfasdfafsdadfasbasdf=&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;Issuer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Lion.AbpPro&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;ExpirationTime&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> , </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// 单位小时，accessToken有效时间</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;RefreshExpirationTime&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">168</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // 7*24 单位小时，refreshToken有效时间 默认7天</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="效果" tabindex="-1">效果 <a class="header-anchor" href="#效果" aria-label="Permalink to &quot;效果&quot;">​</a></h2><p><img src="https://lion-foods.oss-cn-beijing.aliyuncs.com/vben5/refresh-token.gif" alt=""></p>`,10)]))}const u=a(t,[["render",l]]);export{c as __pageData,u as default};
