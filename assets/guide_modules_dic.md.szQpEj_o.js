import{_ as e,c as i,a7 as a,o as l}from"./chunks/framework.humxR97D.js";const y=JSON.parse('{"title":"数据字典模块","description":"","frontmatter":{},"headers":[],"relativePath":"guide/modules/dic.md","filePath":"guide/modules/dic.md","lastUpdated":1735614796000}'),s={name:"guide/modules/dic.md"};function n(d,t,r,h,p,o){return l(),i("div",null,t[0]||(t[0]=[a(`<h1 id="数据字典模块" tabindex="-1">数据字典模块 <a class="header-anchor" href="#数据字典模块" aria-label="Permalink to &quot;数据字典模块&quot;">​</a></h1><div class="info custom-block"><p class="custom-block-title">DataDictionaryManagement</p><ul><li>当Setting模块满足不了我们的需求的时候，可以使用数据字典模块</li><li>需要一些配置可以使用这个模块，比如配置枚举，系统设置之类等</li><li>当前模块在生成项目的时候<strong>默认会集成</strong></li></ul></div><ul><li><a href="https://github.com/WangJunZzz/abp-vnext-pro/tree/main/aspnet-core/modules/DataDictionaryManagement" target="_blank" rel="noreferrer">Github仓库地址</a></li><li><a href="https://gitee.com/WangJunZzz/abp-vnext-pro/tree/main/aspnet-core/modules/DataDictionaryManagement" target="_blank" rel="noreferrer">Gitee仓库地址</a></li></ul><h2 id="如何集成" tabindex="-1">如何集成 <a class="header-anchor" href="#如何集成" aria-label="Permalink to &quot;如何集成&quot;">​</a></h2><ul><li>在对应的层添加对应的引用</li><li>添加 DependsOn(typeof(DataDictionaryManagementXxxModule)) 特性到对应模块 <ul><li>Lion.AbpPro.DataDictionaryManagement.Application</li><li>Lion.AbpPro.DataDictionaryManagement.Application.Contracts</li><li>Lion.AbpPro.DataDictionaryManagement.Domain</li><li>Lion.AbpPro.DataDictionaryManagement.Domain.Shared</li><li>Lion.AbpPro.DataDictionaryManagement.EntityFrameworkCore</li><li>Lion.AbpPro.DataDictionaryManagement.HttpApi</li><li>Lion.AbpPro.DataDictionaryManagement.HttpApi.Client</li></ul></li><li>在自己的dbcontext中实现接口：IDataDictionaryManagementDbContext</li><li>在 EntityFrameworkCore 层添加数据库配置在 AbpProDbContext.cs 的 OnModelCreating()方法中添加 builder.ConfigureDataDictionaryManagement();</li></ul><h2 id="如何配置单独数据库" tabindex="-1">如何配置单独数据库 <a class="header-anchor" href="#如何配置单独数据库" aria-label="Permalink to &quot;如何配置单独数据库&quot;">​</a></h2><ul><li>数据库连接名称：DataDictionaryManagement</li><li>在appsetting.json下配置</li></ul><div class="language-json vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;ConnectionStrings&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;Default&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Data Source=localhost;Database=LionAbpProDB;uid=root;pwd=mypassword;charset=utf8mb4;Allow User Variables=true;AllowLoadLocalInfile=true&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;DataDictionaryManagement&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;Data Source=localhost;Database=DataDictionaryManagement;uid=root;pwd=mypassword;charset=utf8mb4;Allow User Variables=true;AllowLoadLocalInfile=true&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="配置不同租户的数据库连接" tabindex="-1">配置不同租户的数据库连接 <a class="header-anchor" href="#配置不同租户的数据库连接" aria-label="Permalink to &quot;配置不同租户的数据库连接&quot;">​</a></h2><ul><li>在租户管理的数据库连接字符串管理中配置</li><li>这个要事先把表结构生成</li></ul><h2 id="如何修改表前缀" tabindex="-1">如何修改表前缀 <a class="header-anchor" href="#如何修改表前缀" aria-label="Permalink to &quot;如何修改表前缀&quot;">​</a></h2><ul><li>DataDictionaryManagementDbProperties.DbTablePrefix <ul><li>重新指定即可</li></ul></li></ul><div class="language-csharp vp-adaptive-theme line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">csharp</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DataDictionaryManagementDbProperties</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> string</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DbTablePrefix</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Abp&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> static</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> string</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> DbSchema</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> const</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> string</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ConnectionStringName</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;DataDictionaryManagement&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><div class="warning custom-block"><p class="custom-block-title">数据库连接</p><p>如果没有指定DataDictionaryManagement数据连接名称,都会使用<strong>Default</strong>的数据库连接.</p></div><h2 id="表结构说明" tabindex="-1">表结构说明 <a class="header-anchor" href="#表结构说明" aria-label="Permalink to &quot;表结构说明&quot;">​</a></h2><p><strong>DataDictionary</strong> 表结构：</p><table tabindex="0"><thead><tr><th style="text-align:left;">字段名</th><th style="text-align:left;">描述</th><th style="text-align:left;">类型</th></tr></thead><tbody><tr><td style="text-align:left;">Id</td><td style="text-align:left;">Id</td><td style="text-align:left;">Guid</td></tr><tr><td style="text-align:left;">TenantId</td><td style="text-align:left;">租户 id</td><td style="text-align:left;">Guid?</td></tr><tr><td style="text-align:left;">Code</td><td style="text-align:left;">字典编码</td><td style="text-align:left;">string</td></tr><tr><td style="text-align:left;">DisplayText</td><td style="text-align:left;">显示名</td><td style="text-align:left;">string</td></tr><tr><td style="text-align:left;">Description</td><td style="text-align:left;">描述</td><td style="text-align:left;">DateTime</td></tr><tr><td style="text-align:left;">Details</td><td style="text-align:left;">字典明细</td><td style="text-align:left;">List</td></tr><tr><td style="text-align:left;">IsDeleted</td><td style="text-align:left;">是否删除</td><td style="text-align:left;">bool</td></tr><tr><td style="text-align:left;">DeleterId</td><td style="text-align:left;">删除人</td><td style="text-align:left;">Guid?</td></tr><tr><td style="text-align:left;">DeletionTime</td><td style="text-align:left;">删除时间</td><td style="text-align:left;">DateTime</td></tr><tr><td style="text-align:left;">LastModifierId</td><td style="text-align:left;">最后修改人</td><td style="text-align:left;">Guid?</td></tr><tr><td style="text-align:left;">LastModificationTime</td><td style="text-align:left;">最后修改时间</td><td style="text-align:left;">DateTime</td></tr><tr><td style="text-align:left;">CreatorId</td><td style="text-align:left;">创建人</td><td style="text-align:left;">Guid?</td></tr><tr><td style="text-align:left;">CreationTime</td><td style="text-align:left;">创建时间</td><td style="text-align:left;">DateTime</td></tr></tbody></table><p><strong>DataDictionaryDetail</strong> 表结构：</p><table tabindex="0"><thead><tr><th style="text-align:left;">字段名</th><th style="text-align:left;">描述</th><th style="text-align:left;">类型</th></tr></thead><tbody><tr><td style="text-align:left;">Id</td><td style="text-align:left;">Id</td><td style="text-align:left;">Guid</td></tr><tr><td style="text-align:left;">DataDictionaryId</td><td style="text-align:left;">所属字典 Id</td><td style="text-align:left;">Guid</td></tr><tr><td style="text-align:left;">Order</td><td style="text-align:left;">排序</td><td style="text-align:left;">Int</td></tr><tr><td style="text-align:left;">Code</td><td style="text-align:left;">字典编码</td><td style="text-align:left;">string</td></tr><tr><td style="text-align:left;">IsEnabled</td><td style="text-align:left;">启/停用(默认启用)</td><td style="text-align:left;">bool</td></tr><tr><td style="text-align:left;">DisplayText</td><td style="text-align:left;">显示名</td><td style="text-align:left;">string</td></tr><tr><td style="text-align:left;">Description</td><td style="text-align:left;">描述</td><td style="text-align:left;">DateTime</td></tr><tr><td style="text-align:left;">IsDeleted</td><td style="text-align:left;">是否删除</td><td style="text-align:left;">bool</td></tr><tr><td style="text-align:left;">DeleterId</td><td style="text-align:left;">删除人</td><td style="text-align:left;">Guid?</td></tr><tr><td style="text-align:left;">DeletionTime</td><td style="text-align:left;">删除时间</td><td style="text-align:left;">DateTime</td></tr><tr><td style="text-align:left;">LastModifierId</td><td style="text-align:left;">最后修改人</td><td style="text-align:left;">Guid?</td></tr><tr><td style="text-align:left;">LastModificationTime</td><td style="text-align:left;">最后修改时间</td><td style="text-align:left;">DateTime</td></tr><tr><td style="text-align:left;">CreatorId</td><td style="text-align:left;">创建人</td><td style="text-align:left;">Guid?</td></tr><tr><td style="text-align:left;">CreationTime</td><td style="text-align:left;">创建时间</td><td style="text-align:left;">DateTime</td></tr></tbody></table><h2 id="默认领域服务" tabindex="-1">默认领域服务 <a class="header-anchor" href="#默认领域服务" aria-label="Permalink to &quot;默认领域服务&quot;">​</a></h2><ul><li>注入既可以使用IDataDictionaryManager操作数据字典相关功能。</li></ul>`,21)]))}const k=e(s,[["render",n]]);export{y as __pageData,k as default};
